# Claude Usage Dashboard リファクタリング計画

## 概要
Claude Usage Dashboardの機能を整理し、不要な複雑性を排除してよりシンプルで保守しやすいアプリケーションにするためのリファクタリング計画です。

## 削除対象機能の詳細

### 1. Socket.IO リアルタイム通信システム
**削除理由:**
- 使用量データは即座に更新される必要性が低い
- システムの複雑性とリソース消費が増加
- 個人用ダッシュボードとしては過剰な機能

**影響ファイル:**
- `server/socketService.js`
- `server/server.js` (Socket.IO設定)
- `src/hooks/useWebSocket.js`
- `package.json` (socket.io, socket.io-client依存関係)

**代替案:** 手動リフレッシュボタンまたは定期的なポーリング（必要に応じて）

### 2. PDF/画像エクスポート機能
**削除理由:**
- 使用量ダッシュボードでレポート出力の需要は限定的
- 大きな依存関係（html2canvas, jspdf）
- ブラウザの印刷機能で代替可能

**影響ファイル:**
- `src/components/ExportButton.js`
- `src/utils/exportUtils.js`
- `package.json` (html2canvas, jspdf依存関係)

**代替案:** ブラウザの標準印刷機能

### 3. 10個のタブを4個に統合
**統合計画:**
- **サマリー**: 既存のまま維持
- **使用量分析**: 日別・月別・モデル別を統合
- **プロジェクト管理**: プロジェクト別使用量・VS Code拡張・Todo履歴を統合
- **ログ・ツール**: MCPログ・MCPツール使用状況・セッション管理を統合

**影響ファイル:**
- `src/components/Dashboard.js`
- `src/components/tabs/` 配下のすべてのタブコンポーネント

### 4. 複雑なキャッシュシステムの簡素化
**削除理由:**
- 5分キャッシュは過度に複雑
- シンプルなメモリキャッシュで十分

**影響ファイル:**
- `server/services/cacheService.js`
- 各サービスファイルのキャッシュ関連コード

**代替案:** Node.jsの基本的なメモリキャッシュ

### 5. API v1とv2の統合
**削除理由:**
- バージョン管理の複雑性
- 重複したエンドポイント

**影響ファイル:**
- `server/routes/api.js` (v1エンドポイント)
- `server/routes/v2/` 配下のファイル

**統合先:** API v2に統一

### 6. セッション管理機能の簡素化
**削除理由:**
- 個人利用では過度に複雑
- 基本的な使用量表示で十分

**影響ファイル:**
- `src/components/tabs/SessionManagement.js`
- `server/services/sessionService.js`

### 7. チャートタイプの削減
**削除理由:**
- Area, Line, Bar, Scatter, Pie全てが必要ではない
- UI複雑化の原因

**保持するチャート:**
- Line Chart（時系列データ）
- Bar Chart（カテゴリ比較）
- Pie Chart（構成比）

**削除するチャート:**
- Area Chart → Line Chartで代替
- Scatter Chart → 使用頻度が低い

## 実装順序

1. ドキュメント作成（完了予定）
2. Socket.IO削除（高優先度）
3. タブ統合（高優先度）
4. PDF/画像エクスポート削除（中優先度）
5. キャッシュシステム簡素化（中優先度）
6. API v1削除（中優先度）
7. VS Code拡張タブ統合（低優先度）
8. セッション管理簡素化（低優先度）
9. チャートタイプ削減（低優先度）

## 期待される効果

- **コードベース削減**: 約30-40%のコード削減
- **依存関係削減**: 不要なnpmパッケージの削除
- **保守性向上**: シンプルな構造による理解しやすさ
- **パフォーマンス向上**: 軽量化による高速化
- **開発効率**: 新機能追加時の複雑性軽減

## リスク評価

- **データ可視化の機能削減**: 一部のチャートタイプが使用できなくなる
- **リアルタイム性の喪失**: 手動更新が必要になる
- **エクスポート機能の削除**: レポート出力が制限される

これらのリスクは、アプリケーションの主目的（Claude使用量の確認）には大きな影響を与えないと判断しています。